
–ü–æ—Ö–æ–∂–µ, —Ä–µ—á—å –ø—Ä–æ **Kiali** (–Ω–∞–≤–µ—Ä–Ω–æ–µ, –æ–ø–µ—á–∞—Ç–∫–∞ ¬´Kerali¬ª). –°–∏–º–ø—Ç–æ–º—ã ¬´–Ω–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ workload¬ª + –≤ –ª–æ–≥–∞—Ö ¬´label ‚Ä¶ \[] not found¬ª –ø–æ—Å–ª–µ –∞–ø–≥—Ä–µ–π–¥–∞ —Å 2.5 ‚Üí 2.15 —á–∞—â–µ –≤—Å–µ–≥–æ —Å–≤–æ–¥—è—Ç—Å—è –∫ 3-–º –ø—Ä–∏—á–∏–Ω–∞–º:

1. **–°–ª–æ–º–∞–ª–∞—Å—å –º–æ–¥–µ–ª—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –Ω–µ–π–º—Å–ø–µ–π—Å–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ Kiali v2**
2. **–ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å—Ö–µ–º—ã –º–µ—Ç–æ–∫ `app`/`version` —Å —Ç–µ–º, —á—Ç–æ –æ–∂–∏–¥–∞–µ—Ç Kiali**
3. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ RBAC-–ø—Ä–∞–≤–∞ —Å–µ—Ä–≤–∏—Å-–∞–∫–∫–∞—É–Ω—Ç–∞ Kiali**

–ù–∏–∂–µ ‚Äî –∫–æ—Ä–æ—Ç–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ ¬´–ø–æ—á–µ–º—É¬ª, –∫–∞–∫ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ —á—Ç–æ –ø–æ–ø—Ä–∞–≤–∏—Ç—å.

---

# 1) –í–∏–¥–∏–º–æ—Å—Ç—å –Ω–µ–π–º—Å–ø–µ–π—Å–æ–≤ –≤ Kiali v2: —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –∏ –≥–¥–µ –º–æ–∂–Ω–æ —Å–ª–æ–º–∞—Ç—å—Å—è

–° –≤–µ—Ä—Å–∏–∏ **Kiali 2.0** –æ—Ç–º–µ–Ω–µ–Ω—ã —Å—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏ –Ω–∞–ø–æ–¥–æ–±–∏–µ `deployment.accessible_namespaces` –∏ `api.namespaces.*` ‚Äî –æ–Ω–∏ **–±–æ–ª—å—à–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è**. –í–º–µ—Å—Ç–æ –Ω–∏—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ–≤–∞—è –º–æ–¥–µ–ª—å: **cluster-wide access** + **discovery selectors** (–µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç—å). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Kiali –≤ v2 –∏–º–µ–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π –¥–æ—Å—Ç—É–ø –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –Ω–µ—Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–µ–π–º—Å–ø–µ–π—Å—ã.

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –∏–º–µ–Ω–Ω–æ —É –≤–∞—Å:**
–í—ã —Å—Ç–∞–≤–∏—Ç–µ Kiali **–Ω–µ —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä**, –∞ ¬´–≤—Ä—É—á–Ω—É—é¬ª (Deployment + ConfigMap). –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Ä–æ–¥–µ `deployment.*` ‚Äî —ç—Ç–æ **–ø–æ–ª—è CR –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞** –∏ –Ω–∞ ¬´–≥–æ–ª—ã–π¬ª —Å–µ—Ä–≤–µ—Ä –Ω–µ –¥–µ–π—Å—Ç–≤—É—é—Ç. –ó–Ω–∞—á–∏—Ç, –≤–∏–¥–∏–º–æ—Å—Ç—å —Ü–µ–ª–∏–∫–æ–º –∑–∞–≤–∏—Å–∏—Ç –æ—Ç **—Ä–µ–∞–ª—å–Ω—ã—Ö RBAC-–ø—Ä–∞–≤** —Å–µ—Ä–≤–∏—Å-–∞–∫–∫–∞—É–Ω—Ç–∞ –∏ –æ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è Kiali v2. –ï—Å–ª–∏ –ø—Ä–∏ –∞–ø–≥—Ä–µ–π–¥–µ –≤—ã –æ—Å—Ç–∞–≤–∏–ª–∏ —Å—Ç–∞—Ä—ã–µ –ø–æ–ª—è –≤ ConfigMap –∏–ª–∏ ¬´—É—Ä–µ–∑–∞–ª–∏¬ª –ø—Ä–∞–≤–∞ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `Role` –≤–º–µ—Å—Ç–æ `ClusterRole`), Kiali –±–∞–Ω–∞–ª—å–Ω–æ –Ω–µ –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã ‚Äî –∏ Workloads –ø—É—Å—Ç—ã–µ.

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å: –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**

```bash
# –í–ê–ñ–ù–û: –ø–æ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–π namespace –∏ –∏–º—è SA
kubectl auth can-i --as=system:serviceaccount:istio-system:kiali -A get pods
kubectl auth can-i --as=system:serviceaccount:istio-system:kiali -A list deployments
kubectl auth can-i --as=system:serviceaccount:istio-system:kiali -A watch namespaces
```

–í—Å–µ —Ç—Ä–∏ –¥–æ–ª–∂–Ω—ã –≤–µ—Ä–Ω—É—Ç—å **yes**. –ï—Å–ª–∏ –≥–¥–µ-—Ç–æ **no** ‚Äî —ç—Ç–æ –≤–∞—à–∞ –ø–µ—Ä–≤–æ–ø—Ä–∏—á–∏–Ω–∞.

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π ClusterRole (–ø—Ä–∏–º–µ—Ä)**

```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: kiali-read-all
rules:
- apiGroups: [""]
  resources: ["pods","replicationcontrollers","services","endpoints","endpointslices","namespaces","nodes","configmaps"]
  verbs: ["get","list","watch"]
- apiGroups: ["apps"]
  resources: ["deployments","replicasets","statefulsets","daemonsets"]
  verbs: ["get","list","watch"]
- apiGroups: ["batch"]
  resources: ["jobs","cronjobs"]
  verbs: ["get","list","watch"]
- apiGroups: ["networking.istio.io","security.istio.io","gateway.networking.k8s.io"]
  resources: ["*"]
  verbs: ["get","list","watch"]
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: kiali-read-all
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: kiali-read-all
subjects:
- kind: ServiceAccount
  name: kiali
  namespace: istio-system
```

–¢–∞–∫–æ–π –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π –±–∏–Ω–¥ –¥–∞—ë—Ç –¥–æ—Å—Ç—É–ø **–≤–æ –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –∏ –±—É–¥—É—â–∏–µ –Ω–µ–π–º—Å–ø–µ–π—Å—ã** –±–µ–∑ —É—á–∞—Å—Ç–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ ‚Äî —Ä–æ–≤–Ω–æ —Ç–æ, —á—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –Ω–µ —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π –¥–æ—Å—Ç—É–ø –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.

---

# 2) –ú–µ—Ç–∫–∏ `app`/`version`: —á—Ç–æ –ø–æ–º–µ–Ω—è–ª–æ—Å—å –∏ –ø–æ—á–µ–º—É –ª–æ–≥–∏ –∑–∞–≤–∞–ª–µ–Ω—ã ¬´‚Ä¶labels not found¬ª

–ù–∞—á–∏–Ω–∞—è —Å **Kiali 2.6**, –¥–µ—Ñ–æ–ª—Ç—ã `app_label_name`/`version_label_name` –∏–∑–º–µ–Ω–∏–ª–∏ –Ω–∞ ¬´unset¬ª, –∞ Kiali **–Ω–∞—É—á–∏–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å** –Ω–µ—Å–∫–æ–ª—å–∫–æ ¬´—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø–∞—Ä¬ª –º–µ—Ç–æ–∫:

* `service.istio.io/canonical-name` + `service.istio.io/canonical-revision`
* `app.kubernetes.io/name` + `app.kubernetes.io/version`
* `app` + `version`
  (—Ç–æ –µ—Å—Ç—å –º–æ–∂–Ω–æ **–º–∏–∫—Å–æ–≤–∞—Ç—å** —ç—Ç–∏ —Å—Ö–µ–º—ã).

–û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ —É –≤–∞—Å –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **–Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ** –∫–ª—é—á–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `app_name`, `release`, `build`), —Ç–æ Kiali **–Ω–µ —Å–º–æ–∂–µ—Ç —Å–æ–±—Ä–∞—Ç—å workload‚Äô—ã** –∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ –º–∞—Å—Å–æ–≤—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è/–≤–∞–ª–∏–¥–∞—Ü–∏–∏ ¬´—É —Å–∞–±—Å–µ—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –º–µ—Ç–∫–∏ –Ω–∞ matching host¬ª (KIA0203) –∏ –ø–æ—Ö–æ–∂–∏–µ, —Ç.–∫. Kiali –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –≤–µ—Ä—Å–∏–∏/–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –°–∞–º —Ñ–∞–∫—Ç —Ç–æ–≥–æ, —á—Ç–æ –≤—ã –≤–∏–¥–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –∂–∞–ª–æ–±—ã –Ω–∞ ¬´labels ‚Ä¶ not found¬ª, –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ —Å—Ç—ã–∫—É–µ—Ç—Å—è —Å —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º–æ–π.

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å: –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∏–µ –º–µ—Ç–∫–∏ —Ä–µ–∞–ª—å–Ω–æ –µ—Å—Ç—å –Ω–∞ –ü–æ–¥–∞—Ö:
kubectl get pods -A \
  -o custom-columns='NS:.metadata.namespace,POD:.metadata.name,app:.metadata.labels.app,ver:.metadata.labels.version,akn:.metadata.labels.app\.kubernetes\.io/name,akv:.metadata.labels.app\.kubernetes\.io/version,canon:.metadata.labels.service\.istio\.io/canonical-name,crev:.metadata.labels.service\.istio\.io/canonical-revision' \
  | head -30
```

–ï—Å–ª–∏ —Å—Ç–æ–ª–±—Ü—ã `app`/`version` –∏ `app.kubernetes.io/*`/canonical-\* –ø—É—Å—Ç—É—é—Ç ‚Äî Kiali –Ω–µ —Å–º–æ–∂–µ—Ç —Å–æ–±—Ä–∞—Ç—å Workloads.

**–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è**

* –ü—Ä–æ—â–µ –≤—Å–µ–≥–æ ‚Äî **–¥–æ–±–∞–≤–∏—Ç—å** –Ω–∞ Pod‚Äô—ã –æ–¥–Ω—É –∏–∑ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø–∞—Ä –º–µ—Ç–æ–∫ (–º–∏–Ω–∏–º—É–º `app` –∏, –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ, `version`) ‚Äî —ç—Ç–æ –∏ Istio —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç.
* –ò–ª–∏ **—è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å** Kiali –≤–∞—à—É –∫–∞—Å—Ç–æ–º–Ω—É—é —Å—Ö–µ–º—É –º–µ—Ç–æ–∫ –≤ `config.yaml`:

  ```yaml
  istio_labels:
    app_label_name: "app.kubernetes.io/name"
    version_label_name: "app.kubernetes.io/version"
  ```

  (–≠—Ç–∏ –∫–ª—é—á–∏ –æ—Å—Ç–∞–ª–∏—Å—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º–∏; –µ—Å–ª–∏ –≤—ã –∏—Ö –∑–∞–¥–∞—ë—Ç–µ, Kiali –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç ¬´–º–∏–∫—Å–æ–≤–∞—Ç—å¬ª –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–æ–≤–Ω–æ —Ç–æ, —á—Ç–æ —É–∫–∞–∑–∞–Ω–æ).

---

# 3) –°–ª—É—á–∞–π–Ω–æ ¬´–≤—ã–∫–ª—é—á–∏–ª–∏¬ª –≤—Å–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã

Kiali —Å—Ç—Ä–æ–∏—Ç Workloads –∏–∑ Deployment/ReplicaSet/StatefulSet/DaemonSet (–∞ RC/Job/CronJob –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **–∏—Å–∫–ª—é—á–µ–Ω—ã** —Ä–∞–¥–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏). –ï—Å–ª–∏ –≤ `config.yaml` –∫—Ç–æ-—Ç–æ –Ω–µ—á–∞—è–Ω–Ω–æ —Å–¥–µ–ª–∞–ª ¬´–º–∏–Ω—É—Å –≤—Å–µ¬ª –≤ `kubernetes_config.excluded_workloads`, –≤—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —É–≤–∏–¥–∏—Ç–µ ¬´–ø—É—Å—Ç–æ¬ª. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç—Ç–æ—Ç –±–ª–æ–∫ ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç—É–¥–∞ –ø–æ–ø–∞–¥–∞—é—Ç —Ç–æ–ª—å–∫–æ RC/Job/CronJob.

---

# 4) –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –æ–∑–Ω–∞—á–∞—é—Ç –≤–∞—à–∏ –ª–æ–≥–∏

–°–æ–æ–±—â–µ–Ω–∏—è –≤–∏–¥–∞ ¬´subset‚Äôs labels are not found‚Ä¶¬ª ‚Äî —ç—Ç–æ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã Kiali (–ø—Ä–∞–≤–∏–ª–æ **KIA0203**): –≤ `DestinationRule` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã `subsets`, –Ω–æ –Ω–∏ –æ–¥–∏–Ω Pod —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ –∏–º–µ–µ—Ç –º–µ—Ç–æ–∫ —ç—Ç–æ–≥–æ —Å–∞–±—Å–µ—Ç–∞. –¢–∞–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ ¬´—Å—ã–ø–µ—Ç—Å—è¬ª –ª–∞–≤–∏–Ω–æ–π, –µ—Å–ª–∏ Kiali –Ω–µ –≤–∏–¥–∏—Ç ¬´–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ¬ª –ø–∞—Ä—ã –º–µ—Ç–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è/–≤–µ—Ä—Å–∏–∏ (—Å–º. –ø—É–Ω–∫—Ç 2). –≠—Ç–æ **—Å–∏–º–ø—Ç–æ–º**, –∞ –Ω–µ –ø–µ—Ä–≤–æ–ø—Ä–∏—á–∏–Ω–∞.

---

# 5) –ß–µ–∫-–ª–∏—Å—Ç ¬´—Ä–∞–∑—Ä—É–ª–∏—Ç—å –∑–∞ 10 –º–∏–Ω—É—Ç¬ª

1. **RBAC**: –¥–∞–π—Ç–µ kiali-SA –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π read-only –¥–æ—Å—Ç—É–ø (–ø—Ä–∏–º–µ—Ä ClusterRole –≤—ã—à–µ).
   –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç: `kubectl auth can-i --as=system:serviceaccount:‚Ä¶ -A list pods` ‚Üí **yes**.
2. **–ú–µ—Ç–∫–∏**: –æ–±–µ—Å–ø–µ—á—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–π –ø–∞—Ä—ã –º–µ—Ç–æ–∫ –Ω–∞ Pod‚Äô–∞—Ö (`app`+`version` / `app.kubernetes.io/name`+`‚Ä¶/version` / canonical-\*).
   –õ–∏–±–æ –ø—Ä–æ–ø–∏—à–∏—Ç–µ `istio_labels.*` –≤ `config.yaml` –ø–æ–¥ –≤–∞—à—É —Å—Ö–µ–º—É.
3. **ConfigMap**: —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `kubernetes_config.excluded_workloads` –≤—ã —Å–ª—É—á–∞–π–Ω–æ –Ω–µ –∏—Å–∫–ª—é—á–∏–ª–∏ Deployment/StatefulSet/DaemonSet.
4. **–õ–æ–≥–∏ Kiali**: –ø–æ–¥–Ω–∏–º–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ ‚Äî —Ç–∞–º –≤–∏–¥–Ω—ã –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–∏ –æ—à–∏–±–∫–∏ –ø—Ä–∞–≤/–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏).
5. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) **Prometheus** –Ω—É–∂–µ–Ω –¥–ª—è Graph/–º–µ—Ç—Ä–∏–∫, –Ω–æ –Ω–µ –¥–ª—è —Å–ø–∏—Å–∫–∞ Workloads. –ï—Å–ª–∏ Workloads –ø–æ—è–≤—è—Ç—Å—è, –∞ –≥—Ä–∞—Ñ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –ø—É—Å—Ç—ã–º ‚Äî —É–∂–µ —Å–º–æ—Ç—Ä–µ—Ç—å `external_services.prometheus.*`.

---

## –ì–æ—Ç–æ–≤—ã–π ¬´–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π¬ª `config.yaml` –¥–ª—è Kiali 2.15 (manual install), –±–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞

> –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ ClusterRoleBinding –∫–∞–∫ –≤—ã—à–µ. –≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –±–∞–∑–∞: workloads –≤–∏–¥–Ω—ã –≤–æ –≤—Å–µ—Ö –Ω–µ–π–º—Å–ø–µ–π—Å–∞—Ö, –º–µ—Ç–∫–∏ ¬´–º–∏–∫—Å—É—é—Ç—Å—è¬ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é Kiali 2.6+, –ª–∏—à–Ω–µ–≥–æ –Ω–µ—Ç.

```yaml
server:
  port: 20001
auth:
  strategy: anonymous  # –∏–ª–∏ –≤–∞—à OpenID/SO
external_services:
  istio:
    istio_namespace: istio-system
  prometheus:
    url: "http://prometheus.istio-system:9090"  # –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
kubernetes_config:
  # –ù–ï –∏—Å–∫–ª—é—á–∞–µ–º –∫–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã:
  excluded_workloads:
    - "ReplicationController"
    - "Job"
    - "CronJob"
# –ï—Å–ª–∏ —É –≤–∞—Å –ù–ï —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–µ—Ç–∫–∏, —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ:
# istio_labels:
#   app_label_name: "app.kubernetes.io/name"
#   version_label_name: "app.kubernetes.io/version"
```

---

## –ü–æ—á–µ–º—É –ø–æ—Å–ª–µ –∞–ø–≥—Ä–µ–π–¥–∞ –≤—Å—ë ¬´–≤–¥—Ä—É–≥¬ª –ø–æ—Å—ã–ø–∞–ª–æ—Å—å?

* –í—ã –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ –≤–µ—Ç–∫—É **Kiali v2**, –≥–¥–µ **—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∫–ª—é—á–∏** –¥–ª—è –Ω–µ–π–º—Å–ø–µ–π—Å–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–±—Ä–∞–Ω—ã.
* –í **2.6** –ø–æ–º–µ–Ω—è–ª–∞—Å—å –ª–æ–≥–∏–∫–∞ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –º–µ—Ç–æ–∫ (—Ç–µ–ø–µ—Ä—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é Kiali ¬´–º–∏–∫—Å—É—ë—Ç¬ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä) ‚Äî —ç—Ç–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –æ—à–∏–±–∫–∏/–Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Ö–µ–º—ã —è—Ä—á–µ, —á–µ–º —Ä–∞–Ω—å—à–µ.
* –ï—Å–ª–∏ –ø—Ä–∞–≤–∞ —É kiali-SA –±—ã–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö NS (—á–µ—Ä–µ–∑ `Role`/`RoleBinding`), –Ω–æ–≤–∞—è —Å—Ö–µ–º–∞ –±–æ–ª—å—à–µ –Ω–µ ¬´—Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è¬ª –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º (–≤—ã –µ–≥–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ), –ø–æ—ç—Ç–æ–º—É **–Ω–æ–≤—ã–µ –Ω–µ–π–º—Å–ø–µ–π—Å—ã** –∏ –ø—Ä–∞–≤–¥–∞ –Ω–µ –≤–∏–¥–Ω—ã.

---

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è RBAC –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–µ—Ç–æ–∫ —Å–ø–∏—Å–æ–∫ Workloads –≤—Å—ë –µ—â—ë –ø—É—Å—Ç–æ–π ‚Äî –¥–∞–π—Ç–µ 2 –≤–µ—â–∏:

1. –∫—É—Å–æ–∫ –≤–∞—à–µ–≥–æ `config.yaml` Kiali;
2. –≤—ã—Ö–ª–æ–ø `kubectl auth can-i ...` –∏–∑ –±–ª–æ–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏.
   –†–∞–∑–±–µ—Ä—ë–º –¥–æ –≤–∏–Ω—Ç–∏–∫–∞.



___


–û—Ç–ª–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã. –°–≤–µ–¥—É –≤—Å—ë, —á—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è **Kiali 2.15** (–≤–µ—Ç–∫–∞ v2.x), —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏.

# 1) –ö–∞–∫–∏–µ –ø–æ–ª—è **–Ω–µ–ª—å–∑—è** –¥–µ—Ä–∂–∞—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥–µ –Ω–∞ v2.15

–í v2.x Kiali –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–∞–∑–∞–ª—Å—è –æ—Ç —Å—Ç–∞—Ä–æ–π –º–æ–¥–µ–ª–∏ ¬´–¥–æ—Å—Ç—É–ø–Ω—ã–µ/–≤–∏–¥–∏–º—ã–µ –Ω–µ–π–º—Å–ø–µ–π—Å—ã¬ª —á–µ—Ä–µ–∑ include/exclude. –≠—Ç–∏ –ø–æ–ª—è **—É–¥–∞–ª–µ–Ω—ã** –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–±—Ä–∞–Ω—ã –∏–∑ –≤–∞—à–µ–≥–æ `config.yaml` (–∏–ª–∏ –∏–∑ CR, –µ—Å–ª–∏ –≤—ã –∫–æ–≥–¥–∞-—Ç–æ –º–∏–≥—Ä–∏—Ä—É–µ—Ç–µ –Ω–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä):

* `deployment.accessible_namespaces`
* `api.namespaces.include`
* `api.namespaces.exclude`
* `api.namespaces.label_selector_include`
* `api.namespaces.label_selector_exclude` ([Kiali][1])

–¢–∞–∫–∂–µ –≤ –≤–µ—Ç–∫–µ 2.14+ –ø–æ—è–≤–∏–ª–∏—Å—å –Ω–æ–≤—ã–µ ¬´no longer used / auto-discovered¬ª –ø–æ–ª—è. –ï—Å–ª–∏ –≤—ã –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –±—É–¥–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Kiali CR** (–æ–ø–µ—Ä–∞—Ç–æ—Ä), –∏—Ö –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –∏–º–µ–Ω–Ω–æ –∏–∑ **CR** (–≤ –æ–±—ã—á–Ω–æ–º `config.yaml` Kiali Server –æ–Ω–∏ –∏ —Ç–∞–∫ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç, –Ω–æ –ª—É—á—à–µ –Ω–µ —Ç–∞—â–∏—Ç—å –º—É—Å–æ—Ä–Ω—ã–µ –∫–ª—é—á–∏):

* (no longer used) `spec.istio_namespace`, `spec.in_cluster`, `spec.deployment.remote_secret_path`
* (auto-discovered, –±–æ–ª—å—à–µ –Ω–µ –∑–∞–¥–∞—é—Ç—Å—è —Ä—É–∫–∞–º–∏) `spec.external_services.istio.{config_map_name, istiod_deployment_name, istiod_pod_monitoring_port, envoy_admin_local_port, istio_canary_version, istio_injection_annotation, istio_sidecar_annotation, url_service_version}` ([Kiali][2])

–ù–∞–∫–æ–Ω–µ—Ü, –≤ v2.12 –ø—Ä–µ–∫—Ä–∞—Ç–∏–ª–∞—Å—å –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ä–æ–≥–æ –≥—Ä–∞—Ñ–∞ Cytoscape –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
`kiali_feature_flags.ui_defaults.graph.impl` ‚Äî –µ—ë —Ç–æ–∂–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å. ([Kiali][2])

# 2) Discovery selectors: –∫–∞–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è, —á—Ç–æ–±—ã ¬´–≤–∏–¥–Ω—ã –≤—Å–µ namespaces¬ª

–ü–æ–≤–µ–¥–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç **cluster\_wide\_access**:

* **–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–ª—è ‚Äú–≤—Å–µ ns‚Äù —Å–ø–æ—Å–æ–± –ø—Ä–∏ —Ä—É—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ (–±–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞):**
  –¥–µ—Ä–∂–∏—Ç–µ `deployment.cluster_wide_access: true` –∏ **–Ω–µ –∑–∞–¥–∞–≤–∞–π—Ç–µ** discovery selectors –≤–æ–≤—Å–µ (–∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫). –¢–æ–≥–¥–∞ Kiali –ø–æ–∫–∞–∂–µ—Ç **–≤—Å–µ** –Ω–µ–π–º—Å–ø–µ–π—Å—ã, *–∫—Ä–æ–º–µ* —Å–∏—Å—Ç–µ–º–Ω—ã—Ö (`kube-*`, `openshift-*`, `ibm-*`) ‚Äî –æ–Ω–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. ([Kiali][1])

  –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç `config.yaml`:

  ```yaml
  deployment:
    cluster_wide_access: true
  # discovery_selectors: []  # –ø—Ä–æ—Å—Ç–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ
  ```

  (–¢–∞–∫ –∏ –¥–µ–ª–∞–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä ‚Äî `cluster_wide_access: true` –≤ –∫–æ–Ω—Ñ–∏–≥–µ Kiali Server. ([GitHub][3]))

* **–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –≤–∏–¥–µ—Ç—å –µ—â—ë –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ ns** ‚Äî –¥–æ–±–∞–≤—å—Ç–µ **label-based** —Å–µ–ª–µ–∫—Ç–æ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Ö –≤–∫–ª—é—á–∞—Ç:

  1. –ø–æ–º–µ—Ç—å—Ç–µ –Ω—É–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ ns –º–µ—Ç–∫–æ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä `kiali.io/visible=true`;
  2. –¥–æ–±–∞–≤—å—Ç–µ —Å–µ–ª–µ–∫—Ç–æ—Ä:

  ```yaml
  deployment:
    cluster_wide_access: true
    discovery_selectors:
      default:
        - matchLabels:
            kiali.io/visible: "true"
  ```

  –¢–æ–≥–¥–∞ Kiali –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ¬´–∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é¬ª –∏ –±—É–¥–µ—Ç —Ä–æ–≤–Ω–æ —Å–ª–µ–¥–æ–≤–∞—Ç—å –≤–∞—à–∏–º —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º. ([Kiali][1])

> –í–∞–∂–Ω–æ: **Kiali –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç** Istio discovery selectors. –ï—Å–ª–∏ —É Istio –æ–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã, –æ–±—ã—á–Ω–æ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª **—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å** —Å–ø–∏—Å–æ–∫ –∏ –≤ Kiali –≤—Ä—É—á–Ω—É—é (—á–µ—Ä–µ–∑ –µ–≥–æ discovery selectors), –Ω–æ —ç—Ç–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã. ([Kiali][1])

# 3) –° —á–µ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç discovery selectors (–ª–æ–≥–∏–∫–∞ –∏ ¬´–ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏¬ª)

* **`deployment.cluster_wide_access` (–≥–ª–∞–≤–Ω–æ–µ!)**

  * `true` (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –ø—Ä–∏ —Ä—É—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ –±–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞): Kiali –∏–º–µ–µ—Ç **–∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–µ** –ø—Ä–∞–≤–∞. Discovery selectors –≤ —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ **—Ñ–∏–ª—å—Ç—Ä –≤–∏–¥–∏–º–æ—Å—Ç–∏** (–ø–µ—Ä—Ñ–æ—Ä–º–∞–Ω—Å-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è), –∞ –¥–æ—Å—Ç—É–ø –æ—Å—Ç–∞—ë—Ç—Å—è –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–º. –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ ‚áí –≤–∏–¥–Ω—ã –≤—Å–µ –Ω–µ—Å–∏—Å—Ç–µ–º–Ω—ã–µ ns. ([Kiali][1])
  * `false` (–æ–±—ã—á–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä): –¥–æ—Å—Ç—É–ø –¥–∞—ë—Ç—Å—è **—Ç–æ–ª—å–∫–æ** –Ω–∞ ns, —Å–æ–≤–ø–∞–≤—à–∏–µ —Å discovery selectors (–æ–ø–µ—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞—ë—Ç Role/RoleBinding –Ω–∞ –∫–∞–∂–¥—ã–π ns). –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ ‚áí –¥–æ—Å—Ç—É–ø–Ω—ã –ª–∏—à—å ns Kiali –∏ ns –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–≥–æ –ø–ª–µ–π–Ω–∞ Istio. ([Kiali][1])

* **–°–ø–æ—Å–æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–∏**
  –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ **–±–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞** (–≤–∞—à —Å–ª—É—á–∞–π, ConfigMap) Kiali –Ω–µ —É–º–µ–µ—Ç —Å–∞–º —Å–æ–∑–¥–∞–≤–∞—Ç—å Roles –Ω–∞ –∫–∞–∂–¥—ã–π ns, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω —Ä–µ–∂–∏–º `cluster_wide_access: true`. (Helm-—Å–µ—Ä–≤–µ—Ä–Ω—ã–π —á–∞—Ä—Ç —Ç–æ–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ cluster-wide). ([Kiali][1])

* **Operator Namespace Watching / reconcile** (–∞–∫—Ç—É–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –ø–µ—Ä–µ–π–¥—ë—Ç–µ –Ω–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä)
  –ü—Ä–∏ `cluster_wide_access: false` –Ω–æ–≤—ã–µ ns —Å—Ç–∞–Ω—É—Ç –≤–∏–¥–∏–º—ã —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ reconcile –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ (–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏/–ø–æ —Å–æ–±—ã—Ç–∏—é). ([Kiali][1])

* **–ú—É–ª—å—Ç–∏–∫–ª–∞—Å—Ç–µ—Ä**
  –ï—Å—Ç—å `deployment.discovery_selectors.overrides` ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ø–∏—Å–∫–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤; –æ–Ω–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é **–∑–∞–º–µ–Ω—è—é—Ç** `default` –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞. ([Kiali][1])

* **Per-user RBAC**
  –°–µ–ª–µ–∫—Ç–æ—Ä—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç ¬´–∫–∞–∫–∏–µ ns –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å Kiali –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ¬ª, –Ω–æ —á—Ç–æ —É–≤–∏–¥–∏—Ç **–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π RBAC (Roles/ClusterRoles + Bindings). ([Kiali][4])

* **–ù–µ—Å–∫–æ–ª—å–∫–æ Kiali —Å cluster-wide**
  –ï—Å–ª–∏ –ø–æ–¥–Ω–∏–º–µ—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ —Å `cluster_wide_access: true`, –∏–º –Ω—É–∂–Ω—ã **—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ** `deployment.instance_name`. ([Kiali][1])

---

## –ì–æ—Ç–æ–≤—ã–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã

**A. –†—É—á–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (ConfigMap Kiali Server), ‚Äú–≤–∏–¥–Ω—ã –≤—Å–µ ns‚Äù –∫—Ä–æ–º–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö**

```yaml
deployment:
  cluster_wide_access: true
# discovery_selectors: []  # –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ–º
```

([Kiali][1])

**B. –¢–æ –∂–µ + –≤–∫–ª—é—á–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ ns**

```yaml
deployment:
  cluster_wide_access: true
  discovery_selectors:
    default:
      - matchLabels:
          kiali.io/visible: "true"  # –ø–æ—Å—Ç–∞–≤—å—Ç–µ —ç—Ç—É –º–µ—Ç–∫—É –Ω–∞ –Ω—É–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ ns
```

([Kiali][1])

---

### –ö–æ—Ä–æ—Ç–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞—à–µ–≥–æ —Ñ–∞–π–ª–∞

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ **–Ω–µ—Ç** `deployment.accessible_namespaces` –∏ –ª—é–±—ã—Ö `api.namespaces.*`. ([Kiali][1])
2. –î–ª—è —Ä—É—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–µ—Ä–∂–∏—Ç–µ `deployment.cluster_wide_access: true`. ([Kiali][1])
3. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ ¬´–≤—Å–µ ns¬ª ‚Äî –ø—Ä–æ—Å—Ç–æ –Ω–µ –∑–∞–¥–∞–≤–∞–π—Ç–µ discovery selectors; –µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ, –¥–æ–±–∞–≤—å—Ç–µ label-—Å–µ–ª–µ–∫—Ç–æ—Ä –ø–æ–¥ –Ω–∏—Ö. ([Kiali][1])

–ï—Å–ª–∏ –ø–æ–∫–∞–∂–µ—Ç–µ —Å–≤–æ–π —Ç–µ–∫—É—â–∏–π `config.yaml`, –±—ã—Å—Ç—Ä–æ —É–∫–∞–∂—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, —á—Ç–æ —É–¥–∞–ª–∏—Ç—å/–∑–∞–º–µ–Ω–∏—Ç—å.

[1]: https://kiali.io/docs/configuration/namespace-management/ "Namespace Management | Kiali"
[2]: https://kiali.io/news/release-notes/ "Release Notes | Kiali"
[3]: https://raw.githubusercontent.com/istio/istio/release-1.25/samples/addons/kiali.yaml?utm_source=chatgpt.com "https://raw.githubusercontent.com/istio/istio/rele..."
[4]: https://kiali.io/docs/configuration/rbac/ "Namespace access control | Kiali"

---


–õ√∂scha, –≤–∏–∂—É —Ç—Ä–∏ –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–µ–π—á–∞—Å –º–µ—à–∞—é—Ç Kiali 2.15 ¬´—É–≤–∏–¥–µ—Ç—å¬ª –≤–æ—Ä–∫–ª–æ–∞–¥—ã —É —Ç–µ–±—è –≤ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —á–µ—Ä–µ–∑ **ConfigMap** (–±–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞).

# –ß—Ç–æ –ø–æ—á–∏–Ω–∏—Ç—å –≤ —Ç–≤–æ—ë–º —Ñ–∞–π–ª–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

## 1) –ü–∞—Ä–∞ –º–µ—Ç–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è/–≤–µ—Ä—Å–∏–∏

–í –∫–æ–Ω—Ñ–∏–≥–µ –∑–∞–¥–∞–Ω–æ —Ç–æ–ª—å–∫–æ:

```yaml
istio_labels:
  version_label_name: app.kubernetes.io/version
```

–ö–æ–≥–¥–∞ —Ç—ã —É–∫–∞–∑—ã–≤–∞–µ—à—å **—Ö–æ—Ç—å –æ–¥–Ω–æ** –ø–æ–ª–µ –∏–∑ `istio_labels.*`, Kiali –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç ¬´–ø–æ–¥–±–∏—Ä–∞—Ç—å¬ª —Ä–∞–∑–Ω—ã–µ —Å—Ö–µ–º—ã –º–µ—Ç–æ–∫ –∏ –∂–¥—ë—Ç **—Ä–æ–≤–Ω–æ –ø–∞—Ä—É** `app_label_name` + `version_label_name`.
–ï—Å–ª–∏ –Ω–∞ Pod‚Äô–∞—Ö —É —Ç–µ–±—è –ø–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ `app.kubernetes.io/name`, –∞ –ø–æ–ª—è `app_label_name` –Ω–µ—Ç, Kiali –Ω–µ —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç Pod‚Äô—ã ‚Üî workloads ‚Äî –≤ UI –±—É–¥–µ—Ç –ø—É—Å—Ç–æ, –∞ –≤ –ª–æ–≥–∞—Ö —Å—ã–ø—è—Ç—Å—è ¬´‚Ä¶labels \[] not found¬ª.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–≤–∞—Ä–∏–∞–Ω—Ç 1 ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É—é):**

```yaml
istio_labels:
  app_label_name: app.kubernetes.io/name
  version_label_name: app.kubernetes.io/version
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–≤–∞—Ä–∏–∞–Ω—Ç 2):**
–≤–æ–æ–±—â–µ **—É–±–µ—Ä–∏** –±–ª–æ–∫ `istio_labels:` ‚Äî —Ç–æ–≥–¥–∞ Kiali —Å–Ω–æ–≤–∞ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–∞—Ä—ã (`canonical-*`, `app.kubernetes.io/*`, `app`/`version`). –ù–æ –ª—É—á—à–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø–∞—Ä—É, —á—Ç–æ–±—ã –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±—ã–ª–æ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º.

## 2) discovery\_selectors

–£ —Ç–µ–±—è —Å—Ç–æ–∏—Ç –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç:

```yaml
deployment:
  discovery_selectors: {}
```

–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ **–±–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞** –æ–Ω –Ω–µ –¥–∞—ë—Ç –ø–æ–ª—å–∑—ã –∏ –º–æ–∂–µ—Ç –ø—É—Ç–∞—Ç—å: –≤ server-–∫–æ–Ω—Ñ–∏–≥–µ —ç—Ç–æ –ø–æ–ª–µ –Ω–µ –Ω—É–∂–Ω–æ, –∞ –ª–æ–≥–∏–∫–∞ ¬´—Å–µ–ª–µ–∫—Ç–æ—Ä—ã –∑–∞–¥–∞–Ω—ã/–Ω–µ –∑–∞–¥–∞–Ω—ã¬ª –≤ 2.x –≤–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ, –∫–∞–∫–∏–µ –Ω–µ–π–º—Å–ø–µ–π—Å—ã Kiali —Å–∫–∞–Ω–∏—Ä—É–µ—Ç.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
–ø—Ä–æ—Å—Ç–æ **—É–¥–∞–ª–∏ –≤–µ—Å—å –∫–ª—é—á** `discovery_selectors` (–∏ –≤–µ—Å—å –±–ª–æ–∫ `deployment:` —Ç—É—Ç –Ω–µ –Ω—É–∂–µ–Ω ‚Äî —Å–º. –ø—É–Ω–∫—Ç 3).
–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤ –∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ RBAC Kiali –ø–æ–∫–∞–∂–µ—Ç **–≤—Å–µ** (–∫—Ä–æ–º–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö) –Ω–µ–π–º—Å–ø–µ–π—Å–æ–≤.
–ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å –≤–∫–ª—é—á–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ ‚Äî –ø–æ–º–µ—Ç—å –∏—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä, `kiali.io/visible=true` –∏ –¥–æ–±–∞–≤—å —Å–µ–ª–µ–∫—Ç–æ—Ä —É–∂–µ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ:

```yaml
deployment:
  discovery_selectors:
    default:
      - matchLabels:
          kiali.io/visible: "true"
```

(–ù–æ —ç—Ç–æ –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —á–µ—Ä–µ–∑ –æ–ø–µ—Ä–∞—Ç–æ—Ä. –í —Ç–≤–æ—ë–º —Å—Ü–µ–Ω–∞—Ä–∏–∏ ‚Äî —É–±—Ä–∞—Ç—å.)

## 3) –ü–æ–ª–æ–≤–∏–Ω–∞ –ø–æ–ª–µ–π ‚Äî ¬´–æ–ø–µ—Ä–∞—Ç–æ—Ä–Ω—ã–µ¬ª –∏ —Å–µ—Ä–≤–µ—Ä –∏—Ö –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç

–¢—ã –∫–ª–∞–¥—ë—à—å –≤ ConfigMap **server-–∫–æ–Ω—Ñ–∏–≥**, –∞ –≤ –Ω—ë–º –º–Ω–æ–≥–æ –ø–æ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —á–µ—Ä–µ–∑ **Kiali Operator/Helm**:
`deployment.*`, `ingress.*`, `image_*`, `resources`, `replicas`, `security_context`, `service_type`, `node_selector`, `tolerations`, `priority_class_name`, `namespace`, `instance_name`, `version_label`, `view_only_mode` –∏ —Ç.–¥.
–°–µ—Ä–≤–µ—Ä —ç—Ç–∏ –∫–ª—é—á–∏ **–Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç**. –ï—Å–ª–∏ –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ –Ω–∏—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ `cluster_wide_access: true`), –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ª–æ–∂–Ω–æ–µ –æ—â—É—â–µ–Ω–∏–µ, —á—Ç–æ ¬´–¥–æ—Å—Ç—É–ø –µ—Å—Ç—å¬ª, —Ö–æ—Ç—è –Ω—É–∂–Ω—ã–µ **RBAC**-–ø—Ä–∞–≤–∞ –Ω–∞–¥–æ –≤—ã–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ (ClusterRole/Binding –¥–ª—è serviceaccount Kiali).

**–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**

* –õ–∏–±–æ **–æ—á–∏—Å—Ç–∏** ConfigMap –æ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö –∫–ª—é—á–µ–π (–æ—Å—Ç–∞–≤—å —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–æ —á–∏—Ç–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä: `server`, `auth`, `external_services`, `kubernetes_config`, `istio_labels`, `kiali_feature_flags`, `login_token`, `identity` –∏ —Ç.–ø.).
* –õ–∏–±–æ –ø—Ä–æ—Å—Ç–æ **–∑–Ω–∞–π**, —á—Ç–æ –≤—Å—ë –∏–∑ `deployment.*`/`ingress.*` –∑–¥–µ—Å—å ¬´–¥–µ–∫–æ—Ä–∞—Ü–∏–∏¬ª –∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç.

> –û—Ç–¥–µ–ª—å–Ω–æ: `pod_labels: sidecar.istio.io/inject: "true"` ‚Äî –ª—É—á—à–µ —É–±—Ä–∞—Ç—å. Kiali –æ–±—ã—á–Ω–æ **–Ω–µ** –∑–∞–ø—É—Å–∫–∞—é—Ç –≤ mesh; —Å–∞–π–¥–∫–∞—Ä –º–æ–∂–µ—Ç –º–µ—à–∞—Ç—å –∏—Å—Ö–æ–¥—è—â–µ–º—É —Ç—Ä–∞—Ñ–∏–∫—É –Ω–∞ Kubernetes API –∏ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (–Ω—É–∂–Ω—ã ServiceEntry/–ø—Ä–∞–≤–∞ –∏ –ø—Ä.), —á—Ç–æ —Ç–æ–∂–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø—É—Å—Ç—ã–º —Å–ø–∏—Å–∫–∞–º.

# –ú–∏–Ω–∏-–ø–∞—Ç—á (—Å—É—Ç—å)

```diff
- istio_labels:
-   version_label_name: app.kubernetes.io/version
+ istio_labels:
+   app_label_name: app.kubernetes.io/name
+   version_label_name: app.kubernetes.io/version

- deployment:
-   discovery_selectors: {}
+ # (—É–¥–∞–ª–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–µ—Å—å –∫–ª—é—á discovery_selectors; –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ ‚Äî –≤–µ—Å—å –±–ª–æ–∫ deployment: –∫–∞–∫ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Å–µ—Ä–≤–µ—Ä–æ–º)

- pod_labels:
-   sidecar.istio.io/inject: "true"
+ # (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —É–¥–∞–ª–∏—Ç—å, —á—Ç–æ–±—ã –Ω–µ –∏–Ω–∂–µ–∫—Ç–∏—Ç—å —Å–∞–π–¥–∫–∞—Ä –≤ Kiali)
```

# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–≤–Ω–µ –∫–æ–Ω—Ñ–∏–≥–∞)

1. **RBAC** (—Ç–∞–∫ –∫–∞–∫ —É —Ç–µ–±—è –Ω–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞, –æ–Ω –∏—Ö –Ω–µ —Å–æ–∑–¥–∞—ë—Ç):

```bash
# –ø–æ–¥—Å—Ç–∞–≤—å —Å–≤–æ–π namespace/SA Kiali
kubectl auth can-i --as=system:serviceaccount:kiali:kiali -A get pods
kubectl auth can-i --as=system:serviceaccount:kiali:kiali -A list deployments
kubectl auth can-i --as=system:serviceaccount:kiali:kiali -A watch namespaces
```

–í—Å–µ –¥–æ–ª–∂–Ω—ã –æ—Ç–≤–µ—á–∞—Ç—å **yes**. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –¥–æ–±–∞–≤—å –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π read-only RBAC (ClusterRole/ClusterRoleBinding).

2. **–ú–µ—Ç–∫–∏ –Ω–∞ Pod‚Äô–∞—Ö** ‚Äî —Ö–æ—Ç—è –±—ã –≥–¥–µ-—Ç–æ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ –ø—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –µ—Å—Ç—å –ø–∞—Ä–∞:

```bash
kubectl get pods -A \
  -o custom-columns='NS:.metadata.namespace,POD:.metadata.name,APP:.metadata.labels.app\.kubernetes\.io/name,VER:.metadata.labels.app\.kubernetes\.io/version' \
  | head -30
```

–ï—Å–ª–∏ `APP`/`VER` –ø—É—Å—Ç—ã–µ ‚Äî –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∫–∏ –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã.

---

–ï—Å–ª–∏ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ workloads –≤—Å—ë –µ—â—ë –ø—É—Å—Ç—ã–µ ‚Äî –ø—Ä–∏—à–ª–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞:

* –≤—ã–≤–æ–¥ —Ç—Ä—ë—Ö `kubectl auth can-i ‚Ä¶` –∏–∑ –±–ª–æ–∫–∞ –≤—ã—à–µ,
* 10‚Äì15 —Å—Ç—Ä–æ–∫ —Å—Ç–∞—Ä—Ç–∞ –ª–æ–≥–æ–≤ Kiali (—Ç–∞–º –≤–∏–¥–Ω–æ, –∫–∞–∫–∏–µ label names –æ–Ω –ø—Ä–∏–Ω—è–ª –∏ –∫–∞–∫–∏–µ –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –ø—Ä–∏–º–µ–Ω–∏–ª).
  –î–æ–±—å—é –¥–æ —Ä–∞–±–æ—á–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.


---


Here‚Äôs a concise **planning meeting speech in English** you can use. I‚Äôve kept it short, clear, and professional, so it fits naturally into a team sync:

---

**Planning update (last 2 weeks):**

In the past two weeks, I‚Äôve mainly focused on two areas:

1. **Kiali upgrade** ‚Äì I upgraded our Kiali instance from version 2.5 to 2.15. During the migration I also reviewed and fixed the configuration:

   * Corrected the `istio_labels` block to include both `app_label_name` and `version_label_name`, so workloads are now properly discovered.
   * Cleaned up unused operator-specific keys in the ConfigMap and removed the `discovery_selectors`, which were not relevant for our setup.
   * Verified RBAC permissions and checked that workloads now appear correctly in the UI.

2. **Training for new TISO role** ‚Äì I completed onboarding and training sessions related to my new responsibilities as **TISO**. This gave me a better understanding of the expectations for the role and the main processes I‚Äôll be driving.

**Next steps:**

* Monitor Kiali stability in production after the upgrade.
* Apply the TISO learnings in daily work and start aligning with the team on upcoming priorities.

---

üëâ Do you want me to also prepare a **1‚Äì2 sentence ultra-short version** (for stand-up style), or keep it in this detailed format?

---
